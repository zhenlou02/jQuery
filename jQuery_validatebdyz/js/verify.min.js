(function(){var d={map:{},config:{cht:2,msgSec:"<br>",errorCallback:function(a){alert(a)}},extend:function(a){if(a)for(var b in a)d.config[b]=a[b]}},m={required:function(a){return StringUtil.isNotEmpty(a)},integer:function(a){return!m.required(a)||/^\d+$/.test(a)},number:function(a){return!m.required(a)||/^[-+]?\d+([\.]\d+)?$/.test(a)},email:function(a){return!m.required(a)||/^\w+([-\.]\w+)*@\w+([-\.]\w+)*\.\w+([-\.]\w+)*$/.test(a)},phone:function(a){return!m.required(a)||/(^1[34578]\d{9}$)|(^09\d{8}$)/.test(a)},
    letter:function(a){return!m.required(a)||/^[A-Za-z]+$/.test(a)},letter_number:function(a){return!m.required(a)||/^[A-Za-z_0-9]+[\w]?$/.test(a)},english:function(a){return!m.required(a)||/^\w+$/.test(a)}};d.init=function(a){var b=function(f){!0!==d.verifyOne(a,this).status&&$(this).addClass("drea-verify-error")};$(a).children().find("[drea-verify]").bind("blur",b).bind("change",b).bind("input",b).bind("mousemove",function(f){$(this).trigger("drea-verify-event",[f])}).bind("mouseout",function(f){$(a+
    "_div").hide()});b=a;StringUtil.startWidth(b,"#")&&(b=a.substring(1));$("body").append("<div class='drea-verify-error-div' id='"+b+"_div'></div>")};d.verify=function(a,b){for(var f=$(a).children().find("[drea-verify]"),e=[],h=!0,k=0;k<f.length;k++){var c=f[k],l=StringUtil.safeToString($(c).attr("id"),$(c).attr("name"));if(StringUtil.isNotEmpty(l)&&void 0!=b){var g=!1,n;for(n in b)if(b[n]===l){g=!0;break}if(g)continue}c=d.verifyOne(a,c);!0!==c.status&&(h=!1,ArrayUtil.contain(e,c.msg)||e.push(c.msg))}0<
e.length&&$.isFunction(d.config.errorCallback)&&d.config.errorCallback(ArrayUtil.join(e,d.config.msgSec));return h};d.doVerify=function(a,b,f){var e=!0,h,k="";StringUtil.startWidth(b,"length[")?h=function(){var c=b.substring(7,b.length-1).split("-"),l=c[0],g=c[0];2==c.length&&(g=c[1]);c=f.replace(/[^\u4E00-\u9FA5]/g,"");c=c.length*d.config.cht+f.length-c.length;return""!=l&&c<l||""!=g&&c>g?l==g?"\u957f\u5ea6\u5fc5\u987b\u4e3a"+l:"\u957f\u5ea6\u5fc5\u987b\u4ecb\u4e8e"+l+"-"+g+"\u4e4b\u95f4":!0}:$.isFunction(m[b])?
    h=m[b]:d.map[a]&&(h=d.map[a][b]);if($.isFunction(h))try{e=h(f),!1===e?k=!1:!0!==e&&(k=e,e=!1)}catch(c){console.log(c)}return{def:k,status:e}};d.verifyOne=function(a,b){var f=!0,e=$(b).attr("drea-verify"),h=$(b).attr("drea-tip"),k=$(b).trim_val();StringUtil.isEmpty(e)&&(e="required");e=e.split(",");var c=[],l;for(l in e){var g=d.doVerify(a,e[l],k,h);g.status||(f=g.status);""!=g.def&&!1!==g.def&&c.push(g.def)}k=ArrayUtil.join(c,d.config.msgSec);var n=StringUtil.isEmpty(h)?StringUtil.safeToString(k,
    "\u9a8c\u8bc1\u4e0d\u901a\u8fc7"):h;!0!==f?$(b).addClass("drea-verify-error").bind("drea-verify-event",function(q,p){q=p.offsetX+$(b).offset().left+15;p=p.offsetY+$(b).offset().top-20-$(window).scrollTop();$(a+"_div").text(n).css({left:q,top:p}).show()}):($(b).unbind("drea-verify-event").removeClass("drea-verify-error"),$(a+"_div").hide());return{status:f,msg:n}};d.addVerify=function(a,b){void 0===d.map[a]&&(d.map[a]={});for(var f in b)d.map[a][f]=b[f]};$(function(){$("form[drea-form]").each(function(){var a=
    $(this).attr("id");StringUtil.isNotEmpty(a)&&d.init("#"+a)})});window.VERY=d})();